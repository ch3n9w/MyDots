xwayland enabled
# let title bar friendly with chinese
for_window [title=".*"] title_format ゜%title゜
title_align center
# for_window [app_id="telegramdesktop"] floating enable
# for_window [title="^(File|Folder)\s*Already Exists\s*—\s*" app_id="dolphin|org.kde.ark"] floating enable
# for_window [title="^(Copying|Moving|Deleting)\s*—\s*Dolphin" app_id="dolphin"] inhibit_idle open; floating enable
# for_window [title="^Extracting\s" app_id="(dolphin|org.kde.ark)"] inhibit_idle open; floating enable
# for_window [title="^Information\s*—\s*Dolphin" app_id="dolphin"] floating enable
# for_window [title="(?:Open|Save) (?:File|Folder|As)"] floating enable, resize set width 1030 height 710

assign [app_id="firefox"] 1
assign [app_id="terminal"] 2
assign [title="Visual Studio Code"] 3
assign [class="jetbrains"] 3
assign [app_id="neovide"] 3
assign [class="Typora"] 4
assign [app_id="nvim-qt"] 4
assign [title="Freeplane"] 4
assign [class="burp"] 8
assign [app_id="wireshark"] 8
assign [app_id="mpv"] 6
assign [class="music"] 6
assign [title="Wine System Tray"] 6
assign [title="Godzilla"] 6
assign [class="behinder"] 6
assign [app_id="dolphin"] 6
assign [app_id="Nautilus"] 6
assign [class="wps"] 10
assign [title="Spreadsheets"] 10
assign [app_id="libreoffice"] 10
assign [app_id="zathura"] 5
assign [app_id="okular"] 5
assign [class="Zotero"] 5
assign [app_id="waydroid"] 7 
assign [app_id="Waydroid"] 7
assign [class="VirtualBox"] 9
assign [class="Steam"] 7
assign [class="hmcl"] 7
assign [class="Minecraft"] 7


# titlebar_border_thickness 2
set $mod Mod4
font Hack Nerd Font Bold 9


# Home row direction keys, like vim
set $left h
set $down j
set $up k
set $right l

# unable to use fcitx5
# set $term alacritty 
set $term alacritty 
set $menu rofi -show drun -m -1 -theme ~/.config/rofi/nord.rasi | xargs swaymsg exec --


# output * bg ~/Media/Pictures/1080/wallpaper_switch/5-54902_high-resolution-macbook-wallpaper-hd.jpg fill
output * bg ~/Media/Pictures/landscape/city_from_sky.jpg fill
# output * bg ~/Media/Pictures/landscape/rain_city.png fill
# output * bg ~/Media/Pictures/jarvis.jpg fill
# output * bg ~/Media/Pictures/1080/spaceship.png fill
# output * bg ~/Media/Pictures/1080/others/Minecraft/daemon_sword.jpg fill


# launcher settings
# for_window [app_id="^launcher$"] floating enable, sticky enable, resize set 30 ppt 60 ppt, border pixel 10
# set $menu exec $term --class=launcher -e ~/.config/sway/sway-launcher-desktop.sh
# bindgesture swipe:right workspace prev
# bindgesture swipe:left workspace next
# bindsym $mod+w exec "VBoxManage startvm 'windows_the_one'"
bindsym Ctrl+Return exec $term --class=terminal
bindsym $mod+Return exec $term
bindsym $mod+p reload
bindsym $mod+q kill
bindsym $mod+d exec $menu
bindsym Mod1+Ctrl+a exec grim -g "$(slurp)" - | swappy -f - -o - | wl-copy
# bindsym $mod+b exec --no-startup-id rofi-bluetooth

floating_modifier $mod normal

#
# INFO: Moving around:
#
# Move your focus around
bindsym $mod+$left focus left
bindsym $mod+$down focus down
bindsym $mod+$up focus up
bindsym $mod+$right focus right
# bindsym $mod+Tab focus next

# Move the focused window with the same, but add Mod1
bindsym $mod+Left move left
bindsym $mod+Down move down
bindsym $mod+Up move up
bindsym $mod+Right move right
bindsym $mod+a focus parent

bindsym $mod+Control+Shift+Right move workspace to output right
bindsym $mod+Control+Shift+Left move workspace to output left
bindsym $mod+Control+Shift+Down move workspace to output down
bindsym $mod+Control+Shift+Up move workspace to output up
#
# INFO: workspaces:
#
# Switch to workspace
#
workspace_auto_back_and_forth yes

# bind workspace 0 to outter monitor
workspace 1 output HDMI-A-1
workspace 2 output HDMI-A-1
workspace 3 output HDMI-A-1
workspace 4 output HDMI-A-1
workspace 5 output HDMI-A-1
workspace 6 output HDMI-A-1
workspace 7 output HDMI-A-1
workspace 8 output HDMI-A-1
workspace 9 output HDMI-A-1
workspace 10 output HDMI-A-1

bindsym $mod+1 workspace number 1
bindsym $mod+2 workspace number 2
bindsym $mod+3 workspace number 3
bindsym $mod+4 workspace number 4
bindsym $mod+5 workspace number 5
bindsym $mod+6 workspace number 6
bindsym $mod+7 workspace number 7
bindsym $mod+8 workspace number 8
bindsym $mod+9 workspace number 9
bindsym $mod+0 workspace number 10


bindsym --whole-window --border $mod+button5 workspace next
bindsym --whole-window --border $mod+button4 workspace prev

# switch workspace while skip workspace 0
# set $switch_workspace exec --no-startup-id  ~/.config/sway/bin/workspaceloop.sh
# bindsym Mod1+1 $switch_workspace Left 11
# bindsym Mod1+2 $switch_workspace Right 11
bindsym Mod1+1 workspace prev
bindsym Mod1+2 workspace next

## Move focused container to workspace
bindsym $mod+Mod1+1 move container to workspace number 1
bindsym $mod+Mod1+2 move container to workspace number 2
bindsym $mod+Mod1+3 move container to workspace number 3
bindsym $mod+Mod1+4 move container to workspace number 4
bindsym $mod+Mod1+5 move container to workspace number 5
bindsym $mod+Mod1+6 move container to workspace number 6
bindsym $mod+Mod1+7 move container to workspace number 7
bindsym $mod+Mod1+8 move container to workspace number 8
bindsym $mod+Mod1+9 move container to workspace number 9
bindsym $mod+Mod1+0 move container to workspace number 10

bindsym $mod+Mod1+Left move container to workspace prev
bindsym $mod+Mod1+Right move container to workspace next
bindsym Mod1+Tab workspace back_and_forth 
#
# INFO: Layout stuff:
#
# bindsym $mod+x splith
# bindsym $mod+z splitv

# Switch the current container between different layout styles
# bindsym $mod+s layout stacking
bindsym $mod+t layout tabbed
bindsym $mod+e layout toggle split

# Make the current focus fullscreen
bindsym $mod+f fullscreen

bindsym $mod+space floating toggle


#
# INFO: Scratchpad:
bindsym $mod+Mod1+s move scratchpad
bindsym $mod+s scratchpad show

# INFO: Hardware setting:
input "9741:19:DAREU_EK871_BT_keyboard" {
    xkb_layout custom-pc
}
input "1:1:AT_Translated_Set_2_keyboard" {
    xkb_options caps:swapescape
}
input "1241:41543:HOLTEK_USB-HID_AP" {
    xkb_options caps:swapescape
}

seat seat0 xcursor_theme breeze_cursors 20

input "type:touchpad" {
    tap enabled
        drag enabled
        natural_scroll enabled
        scroll_factor 0.5
        dwt enable
        accel_profile "adaptive"
        pointer_accel 0.6
}

bindswitch lid:on output eDP-1 disable
bindswitch lid:off output eDP-1 enable

bindsym --locked XF86AudioRaiseVolume exec sh -c "pactl set-sink-mute 0 false ; pactl set-sink-volume @DEFAULT_SINK@ +5%"
bindsym --locked XF86AudioLowerVolume exec sh -c "pactl set-sink-mute 0 false ; pactl set-sink-volume @DEFAULT_SINK@ -5%"
bindsym --locked XF86AudioMute exec sh -c "pactl set-sink-mute @DEFAULT_SINK@ toggle"
bindsym --locked XF86MonBrightnessDown exec "sudo light -U 5"
bindsym --locked XF86MonBrightnessUp exec "sudo light -A 5"

# display setting
output 'Unknown 0xA195 0x00000000' {
    scale 1
    resolution 2240x1400
    pos 0 0
} 
output 'Unknown Mi Monitor 2479800115814' {
    scale 1
    resolution 1920x1080
    pos 2240 0
} 
output 'Dell Inc. DELL U2720QM 8P55193' {
    scale 1
}
output 'Dell Inc. DELL U2718QM MYPFK98N094L' {
    resolution 2560x1440
    pos 2240 0
}
# output 'Unknown MSI G273Q CA8A521900577' {
#         scale 1
#         resolution 2560x1440
#         pos 0 0
#     }

default_border pixel 5
default_floating_border pixel 2
hide_edge_borders smart
# client.focused           #2e9ef4 #0bf0d4 #FFFFFF #0bf0d4

gaps inner 10
# gaps outer 10
smart_gaps on


bindsym $mod+Ctrl+l exec 'sudo systemctl stop waydroid-container.service;sudo systemctl suspend'

bar {
    swaybar_command waybar
}

exec_always autotiling
exec fcitx5 

# exec swayidle -w \
#      timeout 1800 'swaymsg "output * dpms off"' \
#          resume 'swaymsg "output * dpms on"' 
# exec mpvpaper -o "no-audio --loop-playlist --hwdec=auto" eDP-1 ~/Media/Pictures/videos/mylivewallpapers-com-Boreal-Valley-Dark-Souls-3.mp4

exec swayidle -w \
         timeout 1800 'sudo systemctl stop waydroid-container.service;sudo systemctl suspend;' 

# bindsym Ctrl+Shift+v exec "wl-paste>/tmp/paste;/usr/bin/sed ':a;N;$!ba;s/[\r\n]//g' /tmp/paste>/tmp/after-sed;wl-copy</tmp/after-sed"

# make waybar start immediately
exec hash dbus-update-activation-environment 2>/dev/null && \
    dbus-update-activation-environment --systemd DISPLAY WAYLAND_DISPLAY SWAYSOCK

