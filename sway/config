xwayland enabled
# let title bar friendly with chinese
for_window [title=".*"] title_format ゜%title゜
title_align center
# for_window [title="^(File|Folder)\s*Already Exists\s*—\s*" app_id="dolphin|org.kde.ark"] floating enable
# for_window [title="^(Copying|Moving|Deleting)\s*—\s*Dolphin" app_id="dolphin"] inhibit_idle open; floating enable
# for_window [title="^Extracting\s" app_id="(dolphin|org.kde.ark)"] inhibit_idle open; floating enable
# for_window [title="^Information\s*—\s*Dolphin" app_id="dolphin"] floating enable
# for_window [title="(?:Open|Save) (?:File|Folder|As)"] floating enable, resize set width 1030 height 710

assign [app_id="firefox"] 2
assign [app_id="terminal"] 1
assign [title="Visual Studio Code"] 3
assign [class="jetbrains"] 3
assign [app_id="neovide"] 3
assign [app_id="qtcreator"] 3
assign [class="Typora"] 4
assign [app_id="nvim-qt"] 4
assign [title="Freeplane"] 4
assign [class="burp"] 6
assign [app_id="wireshark"] 6
assign [title="Godzilla"] 7
assign [class="behinder"] 7
# assign [app_id="dolphin"] 6
for_window [app_id="dolphin"] floating enable
assign [class="wemeetapp"] 7
assign [title="WPS"] 9
assign [title="Spreadsheets"] 9
assign [app_id="libreoffice"] 9
assign [app_id="zathura"] 7
assign [app_id="okular"] 7
assign [class="Zotero"] 5
assign [app_id="waydroid"] 7 
assign [app_id="Waydroid"] 7
assign [class="VirtualBox"] 8
# assign [class="Steam"] 6
# assign [class="hmcl"] 7
# assign [class="Minecraft"] 7
assign [app_id="mpv"] 10
assign [app_id="FeelUOwn"] 10
assign [app_id="telegram"] 10
assign [app_id="konsole"] 4
# for_window [app_id="konsole"] {
#     move scratchpad
#     floating enable
# }

for_window [app_id="one.alynx.showmethekey" title="Floating Window - Show Me The Key"] {
  floating enable
  sticky enable
}

# titlebar_border_thickness 2
set $mod Mod4
font Firacode Nerd Font Bold 10

# Home row direction keys, like vim
set $left h
set $down j
set $up k
set $right l

# unable to use fcitx5
# set $term kitty
set $term kitty
set $menu rofi -show drun -m -1 -theme ~/.config/rofi/tokyonight.rasi | xargs swaymsg exec --
set $run rofi -show run -m -1 -theme ~/.config/rofi/tokyonight.rasi | xargs swaymsg exec --


# output * bg ~/Media/Pictures/1080/wallpaper_switch/5-54902_high-resolution-macbook-wallpaper-hd.jpg fill
output * bg ~/Media/Pictures/landscape/city_from_sky.jpg fill
# output * bg ~/Media/Pictures/landscape/rain_city.png fill
# output * bg ~/Media/Pictures/GameorCarton/arknight/FfgdNAbakAQ_WeB.jpg fill
# output * bg ~/Media/Pictures/1080/OS/thinkpad_wallpaper.png fill
# output * bg ~/Media/Pictures/jarvis.jpg fill
# output * bg ~/Media/Pictures/1080/spaceship.png fill
# output * bg ~/Media/Pictures/1080/others/Minecraft/daemon_sword.jpg fill


# launcher settings
# for_window [app_id="^launcher$"] floating enable, sticky enable, resize set 30 ppt 60 ppt, border pixel 10
# set $menu exec $term --class=launcher -e ~/.config/sway/sway-launcher-desktop.sh
# bindgesture swipe:right workspace prev
# bindgesture swipe:left workspace next
# bindsym $mod+w exec "VBoxManage startvm 'windows_the_one'"
bindsym Ctrl+Return exec $term --class=terminal
bindsym $mod+Return exec $term
bindsym $mod+p reload
bindsym $mod+q kill
bindsym $mod+d exec $menu
bindsym $mod+r exec $run
bindsym Mod1+Ctrl+a exec grim -g "$(slurp)" - | swappy -f - -o - | wl-copy
bindsym Ctrl+Mod1+z exec ~/.config/sway/bin/translate.sh
bindsym $mod+Ctrl+Mod1+l exec 'sudo systemctl stop waydroid-container.service;sudo systemctl suspend'
# bindsym $mod+b exec --no-startup-id rofi-bluetooth

floating_modifier $mod normal

#
# INFO: windows: 
#
# Move your focus around
bindsym $mod+$left focus left
bindsym $mod+$down focus down
bindsym $mod+$up focus up
bindsym $mod+$right focus right
# bindsym $mod+Tab focus next


bindsym $mod+a focus parent

# Move the focused window with the same, but add Control
bindsym $mod+Control+$left move left
bindsym $mod+Control+$down move down
bindsym $mod+Control+$up move up
bindsym $mod+Control+$right move right


#
# INFO: workspaces:
#
workspace_auto_back_and_forth yes

bindsym $mod+1 workspace number 1
bindsym $mod+2 workspace number 2
bindsym $mod+3 workspace number 3
bindsym $mod+4 workspace number 4
bindsym $mod+5 workspace number 5
bindsym $mod+6 workspace number 6
bindsym $mod+7 workspace number 7
bindsym $mod+8 workspace number 8
bindsym $mod+9 workspace number 9
bindsym $mod+0 workspace number 10



# bindgesture swipe:right workspace prev 
# bindgesture swipe:left workspace next
# bindsym $mod+Left  workspace prev
# bindsym $mod+Right workspace next
# bindsym Mod1+1 workspace prev
# bindsym Mod1+2 workspace next
# bindsym Mod1+Tab workspace back_and_forth 

# switch workspace while skip workspace 10
workspace 1 output HDMI-A-1
workspace 2 output HDMI-A-1
workspace 3 output HDMI-A-1
workspace 4 output HDMI-A-1
workspace 5 output HDMI-A-1
workspace 6 output HDMI-A-1
workspace 7 output HDMI-A-1
workspace 8 output HDMI-A-1
workspace 9 output HDMI-A-1
workspace 10 output eDP-1
set $switch_workspace exec --no-startup-id  ~/.config/sway/bin/workspaceloop.sh
bindsym Mod1+1 $switch_workspace Left 10
bindsym Mod1+2 $switch_workspace Right 10
bindsym $mod+Left  $switch_workspace Left 10
bindsym $mod+Right $switch_workspace Right 10
bindsym --whole-window --border $mod+button5 $switch_workspace Right 10
bindsym --whole-window --border $mod+button4 $switch_workspace Left 10

# swap master window with slave window
# bindsym Mod1+Tab mark --add "_swap", focus left, swap container with mark "_swap", focus left, unmark "_swap"
bindsym Mod1+Tab exec ~/.config/sway/bin/tab-behavior.py
bindsym $mod+Control+1 move container to workspace number 1
bindsym $mod+Control+2 move container to workspace number 2
bindsym $mod+Control+3 move container to workspace number 3
bindsym $mod+Control+4 move container to workspace number 4
bindsym $mod+Control+5 move container to workspace number 5
bindsym $mod+Control+6 move container to workspace number 6
bindsym $mod+Control+7 move container to workspace number 7
bindsym $mod+Control+8 move container to workspace number 8
bindsym $mod+Control+9 move container to workspace number 9
bindsym $mod+Control+0 move container to workspace number 10

bindsym $mod+Control+Left move container to workspace prev
bindsym $mod+Control+Right move container to workspace next


bindsym $mod+Control+Shift+Right move workspace to output right
bindsym $mod+Control+Shift+Left move workspace to output left
bindsym $mod+Control+Shift+Down move workspace to output down
bindsym $mod+Control+Shift+Up move workspace to output up


# bindsym $mod+x splith
# bindsym $mod+z splitv

# Switch the current container between different layout styles
bindsym $mod+t layout tabbed
bindsym $mod+e layout toggle split

# Make the current focus fullscreen
bindsym $mod+f fullscreen

bindsym $mod+space floating toggle

# INFO: Scratchpad:
bindsym $mod+Control+s move scratchpad
# bindsym $mod+s exec swaymsg [title="konsole"] scratchpad show || $(exec konsole --title 'konsole' & sleep 0.2 && swaymsg [title="konsole"] scratchpad show)
# bindsym $mod+s exec swaymsg scratchpad show || $(exec konsole & sleep 0.5 && swaymsg scratchpad show)
# bindsym $mod+s swaymsg scratchpad show || exec ~/.config/sway/bin/scratchpad.sh
bindsym $mod+s exec swaymsg scratchpad show || exec ~/.config/sway/bin/scratchpad.sh



# INFO: Hardware setting:
input "9741:19:DAREU_EK871_BT_keyboard" {
    xkb_layout custom-pc
}
input "9741:19:EK871_BT_keyboard_Keyboard" {
    xkb_layout custom-pc
}
input "1:1:AT_Translated_Set_2_keyboard" {
    xkb_options caps:swapescape
}
input "1241:41543:HOLTEK_USB-HID_AP" {
    xkb_options caps:swapescape
}

seat seat0 xcursor_theme breeze_cursors 20

input "type:touchpad" {
    tap enabled
        drag enabled
        natural_scroll enabled
        scroll_factor 0.5
        dwt enable
        accel_profile "adaptive"
        pointer_accel 0.6
}

bindswitch --reload --locked lid:on output eDP-1 disable
bindswitch --reload --locked lid:off output eDP-1 enable

bindsym --locked XF86AudioRaiseVolume exec sh -c "pactl set-sink-mute 0 false ; pactl set-sink-volume @DEFAULT_SINK@ +2%"
bindsym --locked XF86AudioLowerVolume exec sh -c "pactl set-sink-mute 0 false ; pactl set-sink-volume @DEFAULT_SINK@ -2%"
bindsym --locked XF86AudioMute exec sh -c "pactl set-sink-mute @DEFAULT_SINK@ toggle"
bindsym --locked XF86MonBrightnessDown exec "sudo light -U 5"
bindsym --locked XF86MonBrightnessUp exec "sudo light -A 5"

# display setting
output 'Unknown 0xA195 0x00000000' {
    scale 1
    resolution 2240x1400
    pos 0 0
} 
output 'Unknown Mi Monitor 2479800115814' {
    scale 0.8
    resolution 1920x1080
    pos 2240 0
} 
output 'Dell Inc. DELL U2720QM 8P55193' {
    scale 1
}
output 'Dell Inc. DELL U2718QM MYPFK98N094L' {
    pos 2240 0
    # resolution 2560x1440
    scale 1.5
}
# output 'Unknown MSI G273Q CA8A521900577' {
#         scale 1
#         resolution 2560x1440
#         pos 0 0
#     }

default_border pixel 2
default_floating_border pixel 2
hide_edge_borders smart
client.focused           #2e9ef4 #7AA2F7 #FFFFFF #7AA2F7

gaps inner 10
# gaps outer 10
smart_gaps on

bar {
    swaybar_command waybar
}

exec dunst
# master-slave layout
exec_always autotiling --limit 2

exec fcitx5 

# exec swayidle -w \
#      timeout 1800 'swaymsg "output * dpms off"' \
#          resume 'swaymsg "output * dpms on"' 
# exec mpvpaper -o "no-audio --loop-playlist --hwdec=auto" eDP-1 ~/Media/Pictures/videos/mylivewallpapers-com-Boreal-Valley-Dark-Souls-3.mp4

exec swayidle -w timeout 1800 'sudo systemctl suspend' 

# make waybar start immediately
exec hash dbus-update-activation-environment 2>/dev/null && \
    dbus-update-activation-environment --systemd DISPLAY WAYLAND_DISPLAY SWAYSOCK

